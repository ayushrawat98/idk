{% extends "skeleton.html" %}
{% import "macros.html" as macros %}

{% block title %}
	/{{board}}/
{% endblock %}

{% block main %}

	<h1>/{{board}}/</h1>
	<p>Board description</p>
	<button class="newPostButton">Create new post</button>

	<div class="newPostWindow" hidden="true">
		<form>
			<label for="name">Name :</label>
			<br>
			<input type="text" id="name" placeholder="Anonymous" required/>
			<br>
			<label for="title">Title :</label>
			<br>
			<input type="text" id="title" placeholder="Title" required/>
			<br>
			<label for="content">Content :</label>
			<br>
			<textarea rows="5" cols="35" placeholder="Whats in your mind..." id="content" required></textarea>
			<br>
			<button type="submit">Submit</button>
		</form>
	</div>

	{{ macros.postList(datalist, board) }}

{% endblock %}

{% block script %}
	<script>
		let newPostButton = document.querySelector('.newPostButton')
		let newPostWindow = document.querySelector('.newPostWindow')
		newPostButton.addEventListener('click', () => {
			newPostWindow.toggleAttribute('hidden')
		})
		let offsetX = 0, offsetY = 0, isDragging = false;

		newPostWindow.addEventListener('mousedown', (e) => {
			isDragging = true;
			// Record where you clicked
			offsetX = e.clientX - newPostWindow.offsetLeft;
			offsetY = e.clientY - newPostWindow.offsetTop;
			newPostWindow.style.cursor = 'grabbing';
		});

		document.addEventListener('mousemove', (e) => {
			if (!isDragging) return;
			// Move the element
			newPostWindow.style.left = e.clientX - offsetX + 'px';
			newPostWindow.style.top = e.clientY - offsetY + 'px';
		});

		document.addEventListener('mouseup', () => {
			isDragging = false;
			newPostWindow.style.cursor = 'move';
		});
	</script>
{% endblock %}